services:
    surfnet_stepup_self_service_self_service.service.second_factor:
        class: Surfnet\StepupSelfService\SelfServiceBundle\Service\SecondFactorService
        arguments:
            - @surfnet_stepup_middleware_client.identity.service.second_factor

    surfnet_stepup_self_service_self_service.form.type.prove_yubikey_possession:
        class: Surfnet\StepupSelfService\SelfServiceBundle\Form\Type\ProveYubikeyPossessionType
        tags: [{ name: form.type, alias: ss_prove_yubikey_possession }]

    surfnet_stepup_self_service_self_service.service.yubikey:
        public: false
        class: Surfnet\StepupSelfService\SelfServiceBundle\Service\YubikeyService
        arguments:
            - @surfnet_stepup_self_service_self_service.guzzle.gateway_api
            - @logger

    surfnet_stepup_self_service_self_service.guzzle.gateway_api:
        public: false
        class: GuzzleHttp\Client
        arguments:
            - {} # Set from the extension

    surfnet_stepup_self_service_self_service.service.yubikey_second_factor:
        class: Surfnet\StepupSelfService\SelfServiceBundle\Service\YubikeySecondFactorService
        arguments:
            - @surfnet_stepup_self_service_self_service.service.yubikey
            - @surfnet_stepup_middleware_client.service.command
