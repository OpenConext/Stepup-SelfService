services:
    surfnet_stepup_self_service_self_service.service.identity:
        class: Surfnet\StepupSelfService\SelfServiceBundle\Service\IdentityService

    surfnet_stepup_self_service_self_service.form.type.verify_yubikey_otp:
        class: Surfnet\StepupSelfService\SelfServiceBundle\Form\Type\VerifyYubikeyOtpType
        tags: [{ name: form.type, alias: ss_verify_yubikey_otp }]

    surfnet_stepup_self_service_self_service.service.yubikey:
        public: false
        class: Surfnet\StepupSelfService\SelfServiceBundle\Service\YubikeyService
        arguments:
            - @surfnet_stepup_self_service_self_service.guzzle.gateway_api
            - @logger

    surfnet_stepup_self_service_self_service.guzzle.gateway_api:
        public: false
        class: GuzzleHttp\Client
        arguments:
            - {} # Set from the extension

    surfnet_stepup_self_service_self_service.service.yubikey_second_factor:
        class: Surfnet\StepupSelfService\SelfServiceBundle\Service\YubikeySecondFactorService
        arguments:
            - @surfnet_stepup_self_service_self_service.service.yubikey
            - @surfnet_stepup_middleware_client.service.command
